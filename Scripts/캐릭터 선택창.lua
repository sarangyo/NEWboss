local ch = {}
ch.dataID = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17}
ch.boss_desc = {}
ch.boss_desc[1] =
[[<color=#F78181>선택조건 : 없음</color>
<color=#01DFD7>고유 능력 : 공격력 + 5</color>
난이도 : ★☆☆☆☆
조작감 : ★★★☆☆
어릴 적 왕따를 당하여 복수심에 불타올라 강해지겠다는 일념 하나로 대왕님 자리에 올랐다. 그러나 따돌림의 기억을 습관적으로 되새기기 때문에 항상 화가 나있다.
]]
ch.boss_desc[2] =
[[<color=#F78181>선택조건 : 없음</color>
<color=#01DFD7>고유 능력 : 마법 공격력 + 12</color>
난이도 : ★★★☆☆
조작감 : ★★★☆☆
흑마법력을 상당히 타고나서 갓난아기 때부터 손가락만 튕기면 모든 것을 파괴해버렸다. 특별한 재능충이며 모든걸 다 가지고 있기에 욕심조차 없다.
]]
ch.boss_desc[3] =
[[<color=#F78181>선택조건 : 없음</color>
<color=#01DFD7>고유 능력 : 경험치(%) + 50</color>
난이도 : ☆☆☆☆☆
조작감 : ★☆☆☆☆
모야모야 행성에 살 적에 기이한 번개를 정수리에 정통으로 맞았다. 몸이 붉어지며 잔상이 생겼고 시간을 느리게 경험했다. 그로 인해 매우 빨라지고 항상 정전기가 흐른다.
]]
ch.boss_desc[4] =
[[<color=#F78181>선택조건 : 10 레벨 이상</color>
<color=#01DFD7>고유 능력 : 마법 공격력 + 16</color>
난이도 : ★★☆☆☆
조작감 : ★★★★☆
작은 동물원에 어디서나 볼 수 있는 흔한 원숭이였다. 인간 꼬마가 주는 수박바를 먹고 마나를 느낄 수 있는 신체를 얻었다. 숭이몬은 노래를 잘하고 아이스크림을 너무 좋아한다.
]]
ch.boss_desc[5] =
[[<color=#F78181>선택조건 : 25 레벨 이상</color>
<color=#01DFD7>고유 능력 : 방어력 + 20</color>
난이도 : ★★☆☆☆
조작감 : ☆☆☆☆☆
어느 텅 빈 우주 공간 양성자가 쌍생성/쌍소멸을 반복할 때 갑자기 터져 나왔다. 그의 정체는 미지이며 말랑하고 쫀쫀한 것이 특징이다.
]]
ch.boss_desc[6] =
[[<color=#F78181>선택조건 : 50 레벨 이상</color>
<color=#01DFD7>고유 능력 : 공격력 + 50</color>
난이도 : ★★☆☆☆
조작감 : ★★★☆☆
어버버 좀비의 종자였던 딱딱이는 언제나 외로웠다. 유일하게 마음을 나눈 좀비가 있었으나 그 날의 전쟁으로 인해 잃어버렸다. 딱딱이는 깊은 동굴에 처박혀 아무것도 먹지 않고 오로지 검술만을 연구했다. 죽음조차 허락하지 않았다. 수백 년의 시간이 흐른 후 탄생하였지만 예전의 어버버 좀비의 기억은 사라지고 없다.
]]
ch.boss_desc[7] =
[[<color=#F78181>선택조건 : 100 레벨 이상</color>
<color=#01DFD7>고유 능력 : 경험치(%) + 750</color>
난이도 : ★★★☆☆
조작감 : ★★★★★
심각한 축농증에 시달렸던 전사는 시원하게 호흡하고 싶은 마음에 온몸에 공청석유를 두른 후 살점을 제거하였다. 해고르킹이 된 그는 춤을 추며 신나게 달려나갔다.
]]
ch.boss_desc[8] =
[[<color=#F78181>선택조건 : 250 레벨 이상</color>
<color=#01DFD7>고유 능력 : 마나 + 2,000</color>
난이도 : ★★☆☆☆
조작감 : ★★★☆☆
다이노 종족은 원래 민트색이다. 브레스를 각성하면 붉은색으로 변하게 된다. 그는 민트색을 너무 좋아했기에 브레스를 각성하고도 민트색을 유지할 수 있는 비기를 알아냈다. 이건 비밀
]]
ch.boss_desc[9] =
[[<color=#F78181>선택조건 : 400 레벨 이상</color>
<color=#01DFD7>고유 능력 : 경험치(%) + 2,500</color>
난이도 : ★☆☆☆☆
조작감 : ★★☆☆☆
유복한 환경에서 차근히 엘리트 코스를 밟아온 그는 영웅 가렌을 보고 동경하며 기사를 꿈꾸기 시작했다. 그에게 신성력이 있다는 것을 눈치챈 부모님은 성직자가 되기를 원했지만 기사가 되고 싶다는 강한 의지를 꺾을 수는 없었다. 대신 성기사로 전직하여 마을을 수호하고 있다. 그는 지금도 가렌처럼 되기를 꿈꾸고 있다.
]]
ch.boss_desc[10] =
[[<color=#F78181>선택조건 : 550 레벨 이상</color>
<color=#01DFD7>고유 능력 : 마나 회복 + 500</color>
난이도 : ★☆☆☆☆
조작감 : ★★☆☆☆
겜알(게임이름RPG) 에서 농락당하던 최약체 보스였다. 이에 분노한 노랑이 종족은 낚시를 하여 시드머니를 모아서 수니몬에게 뒷돈을 주었다. 돈맛을 알아버린 수니몬은 아주 강력해진 네코봇을 만들었다.
]]
ch.boss_desc[11] =
[[<color=#F78181>선택조건 : 800 레벨 이상</color>
<color=#01DFD7>고유 능력 : 공격력 + 500</color>
난이도 : ★★☆☆☆
조작감 : ★★★★☆
오랜 경험과 사신의 힘을 통해 많은 용사들의 두려움의 대상이었던 그였지만 어느 날 한 용사에게 치명적인 상처를 입고 사신의 낫을 잃어버리고 말았다. 한때 최강으로 군림하던 그가 이제 낫을 되찾기 위해 끝없는 성장을 갈구하고 있다.
]]
ch.boss_desc[12] =
[[<color=#F78181>선택조건 : 1200 레벨 이상</color>
<color=#01DFD7>고유 능력 : 경험치(%) + 17,777</color>
난이도 : ★★★★☆
조작감 : ★★★★★
한 때 기사단장의 위치에서 모든 용사들의 선망이 되었던 그는 막강한 힘을 자랑하였다. 하지만 승전의 기쁨도 잠시 돌아온 그를 사랑스럽게 맞이할 아내는 이미 이 세상사람이 아니었다. 충격에 정신을 잃은 그는 사신의 낫을 통해 타나토스와 만나게 되고 아내의 부활을 담보로 그의 수하로 들어가게 된다.
]]
ch.boss_desc[13] =
[[<color=#F78181>선택조건 : 2000 레벨 이상</color>
<color=#01DFD7>고유 능력 : 마법 공격력 + 1,000</color>
난이도 : ★★☆☆☆
조작감 : ★★★☆☆
끝없는 서리 동굴의 끝. 그 앞을 수호하는 다크나이트 들 중에서도 1군 단장인 해골 왕자는 단연코 세 손가락 안에 꼽는 강자다. 그의 쾌속한 검술은 기사단장보다 날카롭고 현란한 마법은 리퍼보다 파괴적이다. 약한 자들은 마주치지 마라. 언제고 스켈레톤이 되어 당신의 조국을 자신의 손으로 베고 있을지도 모르니...
]]
ch.boss_desc[14] =
[[<color=#F78181>선택조건 : 3000 레벨 이상</color>
<color=#01DFD7>고유 능력 : 마나 + 330,000</color>
난이도 : ★☆☆☆☆
조작감 : ★★★☆☆
천둥의 신으로 추앙받던 토른.
]]
ch.boss_desc[15] =
[[<color=#F78181>선택조건 : 4000 레벨 이상</color>
<color=#01DFD7>고유 능력 : 체력 + 550,000</color>
난이도 : ★★★☆☆
조작감 : ★★★★☆
오랜시간 마나에 노출되며 지성을 얻은 숲의 신전. 그가 몸을 일으켜 가장 먼저 한일은 마을을 구경하는 것이었다. 너무 반가워 달려가던 그를 본 사람들은 소리를 지르며 달아나기 일쑤였고 자신이 존경하던 성기사들은 칼을 휘두르며 달려들었다. 상처만 남은 그에게 손을 내민 ●●●은 처음으로 그를 인정해준 존재였다.
]]
ch.boss_desc[16] =
[[<color=#F78181>선택조건 : 5000 레벨 이상</color>
<color=#01DFD7>고유 능력 : 룬의 힘 + 3,000</color>
난이도 : ★★★★★
조작감 : ★★★★★
신의 대리자로 막대한 힘을 받은 대천사 미카엘은 시간이 지날수록 방탕해지고 게을러지는 신들의 모습과 추악한 인간의 모습에 질려 오딘에게 충언을 올렸다. 하지만 도리어 자신을 죽이려하는 신에게 도망친 그는 세상을 바꾸겠다는 수니몬의 야망에 이끌려 마신총사령관이 되었다. 신조차 그를 막을순 없을 것이다.
]]
ch.boss_desc[17] =
[[<color=#F78181>선택조건 : 레메네스 탑 24층 이상</color>
<color=#01DFD7>고유 능력 : 체력 + 6,666,666</color>
<color=#01DFD7>고유 능력2 : 투지 + 22,222</color>
난이도 : ★★★★★
조작감 : ★★★☆☆
솔로몬의 72 악마중 하나인 지옥의 백작이다. 지옥에서 26개의 군단을 지휘한다. 남녀사이의 관계를 간파하며 여자를 만지면 불임으로 만드는 끔찍한 능력을 가지고 있다. 또한 거짓말만을 이야기한다.
]]

function ch:ShowAlert(txt, switch, signal, data --[[ Table형식의 data ]])
	self.black_panel = Panel(Rect(0, 0, Client.width, Client.height))
	self.black_panel.color = Color(0, 0, 0, 100)
	self.black_panel.showOnTop = true
	
	local pal2 = Image('Pictures/캐릭터 선택창/ShowAlert_back.png', Rect(0, 0, 236, 124))
	pal2.pivotX = 0.5
	pal2.pivotY = 0.5
	pal2.anchor = 4
	self.black_panel.AddChild(pal2)
	
	local text = Text('<color=#000000>'..txt..'</color>', Rect(2, 2, 238, 90))
	text.textSize = 14
	text.textAlign = 4
	pal2.AddChild(text)
	
	local text2 = Text('<color=#E6E6E6>'..txt..'</color>', Rect(0, 0, 238, 90))
	text2.textSize = 14
	text2.textAlign = 4
	pal2.AddChild(text2)
	
	local pal3 = Image('Pictures/캐릭터 선택창/Button.png', Rect(0, 83, 84, 34))
	pal3.anchor = 1
	pal3.pivotX = 0.5
	pal2.AddChild(pal3)
	
	local but = Button('<color=#FACC2E>확 인</color>', Rect(0, 0, 84, 34))
	but.color = Color(0, 0, 0, 0)
	but.textAlign = 4
	pal3.AddChild(but)
	
	if switch then			
		local pal4 = Image('Pictures/캐릭터 선택창/Button.png', Rect(-55, 83, 84, 34))
		pal4.anchor = 1
		pal4.pivotX = 0.5
		pal2.AddChild(pal4)
		
		local but2 = Button('<color=#FACC2E>확 인</color>', Rect(0, 0, 84, 34))
		but2.color = Color(0, 0, 0, 0)
		but2.textAlign = 4
		pal4.AddChild(but2)
		
		pal3.rect = Rect(55, 83, 84, 34)
		
		but.text = '<color=#FACC2E>취 소</color>'
		
		but2.onClick.Add(function()
			self.black_panel.Destroy()
			Client.FireEvent(signal, Utility.JSONSerialize(data))
		end)
	end
	
	but.onClick.Add(function()
		self.black_panel.Destroy()
	end)
end

function ch:main(x, y, f)
	if self.main_panel then return end
	local CW, CH = Client.width, Client.height
	local path = 'Pictures/캐릭터 선택창/'
	self.main_panel = Image(path..'나무층.png', Rect(0, 0, CW, CH))
	self.main_panel.showOnTop = true
	
	local but_image, face_img, data_txt, chose_but = {}, {}, {}, {}
	local size = CH*0.11458*0.73
	local ch_img = Image('', Rect(0, 0, size*4, size*4))
	ch_img.anchor = 4
	ch_img.pivotX = 0.5
	ch_img.pivotY = 0.5
	ch_img.visible = false
	self.main_panel.AddChild(ch_img)
	
	local textsize = size*0.3488
	
	local chDesc_pal = Image(path..'background.png', Rect(0, 0, size*5.8, size*7))
	chDesc_pal.anchor = 4
	chDesc_pal.pivotX = -0.5
	chDesc_pal.pivotY = 0.6
	chDesc_pal.visible = false
	self.main_panel.AddChild(chDesc_pal)
	
	local chDesc_txt = Text('', Rect(size*0.15, size*0.15, chDesc_pal.width-size*0.3, chDesc_pal.height-size*0.3))
	chDesc_txt.textAlign = 0
	chDesc_txt.textSize = textsize
	chDesc_pal.AddChild(chDesc_txt)
	
	local chDesc_but_img = Image(path..'Button.png', Rect(0, 0, size*2, size*0.8))
	chDesc_but_img.anchor = 7
	chDesc_but_img.pivotX = 0.5
	chDesc_but_img.pivotY = 1.5
	chDesc_pal.AddChild(chDesc_but_img)
	
	local chDesc_but = Button('선 택', Rect(0, 0, chDesc_but_img.width, chDesc_but_img.height))
	chDesc_but.textSize = textsize
	chDesc_but.SetOpacity(0)
	chDesc_but_img.AddChild(chDesc_but)
	
	local chose_num, ch_name = 0, ''
	chDesc_but.onClick.Add(function()
		if chose_num~=0 then
			Client.myPlayerUnit.PlaySE('시스템소리/빡.ogg', 0.8)
			chDesc_but.enabled = false
			Client.RunLater(function()
				chDesc_but.enabled = true
			end, 0.5)
			self:ShowAlert(ch_name..'\n선택하시겠습니까?', true, '캐릭터_선택완료', {chose_num, x, y, f})
		end
	end)
	
	for i=1, #self.dataID do
		but_image[i] = Image(path..'캐릭터얼굴.png', Rect(0, 0, CW*0.1375, CH*0.11458))
		but_image[i].anchor = 6
		but_image[i].pivotX = -0.1-1.13*(((i%6==0 and 6) or i%6)-1)
		but_image[i].pivotY = 2.2-(math.ceil(i/6)-1)*1.1
		self.main_panel.AddChild(but_image[i])
		
		face_img[i] = Image(path..'보스얼굴'..string.format('%02d', i)..'.png', Rect(0, 0, size, size))
		face_img[i].pivotX = -0.1
		face_img[i].pivotY = -0.2
		but_image[i].AddChild(face_img[i])
		
		data_txt[i] = Text('<color=#000000>'..Client.GetCharacter(self.dataID[i]).name..'</color>', 
			Rect(0, 0, but_image[i].width*0.6, but_image[i].height*0.9))
		data_txt[i].textAlign = 4
		data_txt[i].textSize = textsize*0.92857
		data_txt[i].pivotX = -0.65
		data_txt[i].pivotY = -0.05
		but_image[i].AddChild(data_txt[i])
		
		chose_but[i] = Button('', Rect(0, 0, but_image[i].width, but_image[i].height))
		chose_but[i].SetOpacity(0)
		but_image[i].AddChild(chose_but[i])
		
		chose_but[i].onClick.Add(function()
			chose_num = i
			Client.myPlayerUnit.PlaySE('시스템소리/빡.ogg', 0.8)
			local delay_pal = Panel(Rect(0, 0, CW, CH*0.27))
			delay_pal.SetOpacity(0)
			delay_pal.pivotY = -2.7
			self.main_panel.AddChild(delay_pal)
			Client.RunLater(function()
				delay_pal.Destroy()
				delay_pal = nil
			end, 0.6)
			
			chDesc_pal.visible = true
			ch_img.visible = true
			ch_img.SetImage(path..'보스얼굴'..string.format('%02d', i)..'.png')
			
			ch_name = Client.GetCharacter(self.dataID[i]).name
			chDesc_txt.text = '<size='..textsize*1.1429..'><color=#FFBF00>'..ch_name..'</color></size>\n'..
				self.boss_desc[i]
		end)
	end
	
	for i=13, #self.dataID do
		but_image[i].visible = false
		local I = i-12
		but_image[i].pivotX = -0.1-1.13*(((I%6==0 and 6) or I%6)-1)
		but_image[i].pivotY = 2.2-(math.ceil(I/6)-1)*1.1
	end
	
	local next_bool = false
	local arrow = Image(path..'화살표'..tostring(next_bool)..'.png', Rect(0, 0, size*1.2, size*1.2))
	arrow.anchor = 8
	arrow.pivotX = 1
	arrow.pivotY = 1.9
	self.main_panel.AddChild(arrow)
	
	local arrow_but = Button('', Rect(0, 0, arrow.width, arrow.height))
	arrow_but.SetOpacity(0)
	arrow.AddChild(arrow_but)
	
	arrow_but.onClick.Add(function()
		Client.myPlayerUnit.PlaySE('시스템소리/빡.ogg', 0.8)
		arrow_but.enabled = false
		Client.RunLater(function()
			arrow_but.enabled = true
		end, 0.5)
		
		next_bool = not next_bool
		arrow.image = path..'화살표'..tostring(next_bool)..'.png'
		if next_bool then
			for i=1, 12 do
				but_image[i].visible = false
			end
			for i=13, #self.dataID do
				but_image[i].visible = true
			end
		else
			for i=1, 12 do
				but_image[i].visible = true
			end
			for i=13, #self.dataID do
				but_image[i].visible = false
			end
		end
		-- 캐릭터 다음 페이지 미구현
	end)
	
	local exit_img = Image(path..'mini_but.png', Rect(0, 0, 85, 30))
	exit_img.SetOpacity(150)
	exit_img.anchor = 3
	exit_img.pivotX = -0.15
	exit_img.pivotY = -2.3
	self.main_panel.AddChild(exit_img)
	
	local exit_but = Button('나가기', Rect(0, 0, exit_img.width, exit_img.height))
	exit_but.SetOpacity(0)
	exit_img.AddChild(exit_but)
	exit_but.onClick.Add(function()
		Client.myPlayerUnit.PlaySE('시스템소리/빡.ogg', 0.8)
		if x==nil then
			self:ShowAlert('보스를 선택해주세요.')
		else
			Client.FireEvent('캐릭터선택창_나가기', Utility.JSONSerialize{x, y, f})
		end
	end)
end

Client.GetTopic('캐릭터선택창').Add(function(x, y, f)
	ch:main(x, y, f)
end)

Client.GetTopic('선택창_종료').Add(function()
	Client.RunLater(function()
		ch.main_panel.Destroy()
		ch.main_panel = nil
	end, 0.6)
end)

Client.GetTopic('ch:ShowAlert').Add(function(txt)
	ch:ShowAlert(txt)
end)
--[[
Client.RunLater(function()
	Client.FireEvent('캐릭터_정보주세요')
end, 0.5)]]